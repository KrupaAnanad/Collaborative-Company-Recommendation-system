<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Smart Collaborative Recommender</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif; }

body {
    min-height:100vh;
    background:linear-gradient(-45deg,#1f1c2c,#928dab,#1f4037,#99f2c8);
    background-size:400% 400%;
    animation:gradientMove 10s ease infinite;
    display:flex;
    justify-content:center;
    padding:40px 20px;
}

@keyframes gradientMove {
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

.container {
    width:100%;
    max-width:1100px;
    background:rgba(255,255,255,0.08);
    backdrop-filter:blur(25px);
    border-radius:25px;
    padding:40px;
    color:white;
    box-shadow:0 25px 70px rgba(0,0,0,0.4);
}

h1 { text-align:center; margin-bottom:25px; }

.search-container {
    background:rgba(255,255,255,0.12);
    border-radius:15px;
    padding:14px;
    margin-bottom:15px;
    cursor:pointer;
}

.search-container input {
    width:100%;
    background:transparent;
    border:none;
    outline:none;
    color:white;
    font-size:15px;
}

.skill-dropdown {
    display:none;
    max-height:200px;
    overflow-y:auto;
    background:white;
    color:black;
    border-radius:10px;
    padding:10px;
}

.skill-item {
    padding:6px;
    cursor:pointer;
}

.skill-item:hover {
    background:#00c9ff;
    color:white;
}

.selected-skills {
    margin-top:10px;
    display:flex;
    flex-wrap:wrap;
    gap:6px;
}

.tag {
    background:#00c9ff;
    padding:5px 10px;
    border-radius:15px;
    font-size:12px;
    cursor:pointer;
    color:black;
}

select, button {
    margin-top:15px;
    padding:8px;
    border-radius:8px;
    border:none;
}

.cards {
    margin-top:30px;
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:15px;
}

.card {
    background:rgba(255,255,255,0.1);
    padding:15px;
    border-radius:15px;
}

.badge {
    margin-top:8px;
    padding:5px 10px;
    border-radius:15px;
    font-size:12px;
    display:inline-block;
}

.top { background:#00ff99; color:black; }
.medium { background:#ffcc00; color:black; }
.low { background:#ff5e62; color:white; }
.not { background:#555; color:white; }
</style>
</head>

<body>

<div class="container">

<h1>ü§ù Collaborative Company Recommender</h1>

<form method="POST">

<div class="search-container" onclick="toggleDropdown()">
<input type="text" placeholder="Select Skills..." readonly>
</div>

<div class="skill-dropdown" id="dropdown">
{% for skill in skills %}
<div class="skill-item" onclick="selectSkill('{{ skill }}')">
{{ skill }}
</div>
{% endfor %}
</div>

<div class="selected-skills" id="selectedSkills"></div>
<input type="hidden" name="skills" id="hiddenSkills">

<label>Number of Companies:</label>
<select name="num_results">
<option value="5">5</option>
<option value="10">10</option>
<option value="15">15</option>
<option value="20">20</option>
</select>

<button type="submit">Recommend</button>

</form>

{% if results %}
<div class="cards">
{% for row in results %}
<div class="card">
<strong>{{ loop.index }}. {{ row.company }}</strong>

{% if loop.index == 1 %}
<div class="badge top">üî• Best Match</div>
{% elif loop.index <= 3 %}
<div class="badge medium">‚≠ê Strong Match</div>
{% elif loop.index <= 7 %}
<div class="badge low">‚úî Suitable</div>
{% else %}
<div class="badge not">‚ùå Less Relevant</div>
{% endif %}

</div>
{% endfor %}
</div>
{% endif %}

</div>

<script>
let selected=[];

function toggleDropdown(){
let d=document.getElementById("dropdown");
d.style.display=d.style.display==="block"?"none":"block";
}

function selectSkill(skill){
if(!selected.includes(skill)){
selected.push(skill);
updateTags();
}
}

function updateTags(){
let container=document.getElementById("selectedSkills");
container.innerHTML="";
selected.forEach(skill=>{
let tag=document.createElement("div");
tag.className="tag";
tag.innerText=skill;
tag.onclick=function(){
selected=selected.filter(s=>s!==skill);
updateTags();
};
container.appendChild(tag);
});
document.getElementById("hiddenSkills").value=selected.join(",");
}
</script>

</body>
</html>
